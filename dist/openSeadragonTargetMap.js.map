{"version":3,"file":"openSeadragonTargetMap.js","sources":["../src/functions.js","../src/targetPatch.js","../src/targetChart.js","../node_modules/transform-case/module/transformCase.js","../src/displayTable.js","../src/targetMap.js","../src/index.js"],"sourcesContent":["/**\n * Test for values with which calculations can be done\n * @private\n * @param {arguments} anonymus - one or more values to test\n * @returns {boolean} is a useable number\n */\nconst isUsableNumber = function() {\n    let isUsable = Boolean(arguments.length)\n    Array.from(arguments).forEach(value => {\n        isUsable =\n            isUsable && typeof value === 'number' && Number.isFinite(value)\n    })\n    return isUsable\n}\n\n/**\n * Round at decimals\n * @private\n * @param {number} number - any number to round\n * @param {number} decimals - number of decimals to round at\n * @returns {number} the rounded number\n */\nconst roundAt = function(number, decimals) {\n    // https://www.jacklmoore.com/notes/rounding-in-javascript/\n    return Number(Math.round(number + 'e' + decimals) + 'e-' + decimals)\n}\n\n/**\n * Check for primitives\n * @private\n * @param {any} value - any value to check\n * @returns {boolean} is a primitive\n */\nconst isPrimitive = function(value) {\n    return (\n        typeof value === 'string' ||\n        typeof value === 'number' ||\n        typeof value === 'boolean'\n    )\n}\n\n/**\n * Check for the node being inside the DOM\n * @private\n * @param {Node} node\n * @returns {Boolean} true when the node is onscreen -- not removed\n */\nconst isAttachedToDom = function(elm) {\n    return (\n        elm &&\n        (elm.getRootNode() instanceof Document ||\n            elm.getRootNode() instanceof ShadowRoot)\n    )\n}\n\n/**\n * Check for existence of property in object\n * @private\n * @param {Object} object\n * @param {String} prop\n * @returns {Boolean} hasIt - object has that own property\n */\nconst hasOwnProperty = function(object, prop) {\n    const hasIt = Object.prototype.hasOwnProperty.call(object, prop)\n    return hasIt\n}\n\nexport { isUsableNumber, roundAt, isPrimitive, isAttachedToDom, hasOwnProperty }\n","import { hasOwnProperty } from './functions'\n\nconst TargetPatch = function(patchData, parentNode, containerSize) {\n    this.name = 'TargetPatch'\n    this.element = document.createElement('targetPatch')\n\n    this.element.style.left = `${(patchData.location.x * 100) /\n        containerSize.x}%`\n    this.element.style.top = `${(patchData.location.y * 100) /\n        containerSize.y}%`\n    this.element.style.width = `${(patchData.location.w * 100) /\n        containerSize.x}%`\n    this.element.style.height = `${(patchData.location.h * 100) /\n        containerSize.y}%`\n    parentNode.appendChild(this.element)\n\n    let userData = {}\n    for (let [key, value] of Object.entries(patchData)) {\n        if (!(key === 'location')) {\n            userData[key] = value\n        }\n    }\n    this.element.dataset.picturaeTargetmapDisplay = JSON.stringify(userData)\n\n    if (userData.validity && hasOwnProperty(userData.validity, 'valid')) {\n        const isValid = userData.validity.valid\n        this.element.classList.add(isValid ? 'valid' : 'invalid')\n    }\n}\n\nexport { TargetPatch }\n","import { hasOwnProperty } from './functions'\nimport { TargetPatch } from '../src/targetPatch'\n\nconst TargetChart = function(chartData, parentNode, containerSize) {\n    this.name = 'TargetChart'\n    this.element = document.createElement('targetChart')\n\n    this.element.style.left = `${(chartData.location.x * 100) /\n        containerSize.x}%`\n    this.element.style.top = `${(chartData.location.y * 100) /\n        containerSize.y}%`\n    this.element.style.width = `${(chartData.location.w * 100) /\n        containerSize.x}%`\n    this.element.style.height = `${(chartData.location.h * 100) /\n        containerSize.y}%`\n    if (chartData.location.r) {\n        if (chartData.location.r === 180) {\n            this.element.style.transformOrigin = 'center center'\n            const rotate = `rotate(${chartData.location.r}deg)`\n            this.element.style.transform = rotate //+ ' ' + translate\n        }\n    }\n    parentNode.appendChild(this.element)\n\n    let userData = {}\n    for (let [key, value] of Object.entries(chartData)) {\n        if (\n            !(\n                key === 'location' ||\n                key === 'colorPatches' ||\n                key === 'edgePatches'\n            )\n        ) {\n            userData[key] = value\n        }\n    }\n    this.element.dataset.picturaeTargetmapDisplay = JSON.stringify(userData)\n\n    if (userData.validity && hasOwnProperty(userData.validity, 'valid')) {\n        const isValid = userData.validity.valid\n        this.element.classList.add(isValid ? 'valid' : 'invalid')\n    }\n\n    this.patches = []\n    const contentSize = {\n        x: chartData.location.w,\n        y: chartData.location.h,\n    }\n    if (chartData.colorPatches) {\n        chartData.colorPatches.forEach(patchData => {\n            patchData.patchType = 'color'\n            this.patches.push(\n                new TargetPatch(patchData, this.element, contentSize),\n            )\n        })\n    }\n    // if (chartData.edgePatches) {\n    //     chartData.edgePatches.forEach(patchData => {\n    //         patchData.patchType = 'edge'\n    //         this.patches.push(\n    //             new TargetPatch(patchData, this.element, contentSize),\n    //         )\n    //     })\n    // }\n}\n\nexport { TargetChart }\n","const e=e=>Boolean(e&&\"string\"==typeof e&&1===e.length),t=t=>e(t)&&Boolean(t.match(/[0-9]/)),r=t=>e(t)&&t.toLowerCase()!==t.toUpperCase(),i=t=>e(t)&&t===t.toLowerCase()&&t!==t.toUpperCase(),s=t=>e(t)&&t===t.toUpperCase()&&t!==t.toLowerCase(),p={delimit:[],preserve:[],replace:{},delimitInput:\"\",delimitLetterNumber:!0,delimitLowerUpper:!0,delimitNumberLetter:!0,delimitUpperLower:!1,delimitUpperUpperLower:!0,delimitOutput:\" \"},o={postProcess:e=>e,firstWordFirstChar:e=>e,firstWordNextChars:e=>e,nextWordsFirstChar:e=>e,nextWordsNextChars:e=>e},l=(e,t)=>{const r=new RegExp(\"^\"+t),i=new RegExp(t+\"$\"),s=new RegExp(t+t,\"g\");return e.replace(r,\"\").replace(i,\"\").replace(s,t)},n=(e,p,o,l)=>{let n,a,u,d,m;return n=l.delimitLetterNumber&&r(e)&&t(p),a=l.delimitLowerUpper&&i(e)&&s(p),u=l.delimitNumberLetter&&t(e)&&r(p),d=l.delimitUpperLower&&s(e)&&i(p),m=l.delimitUpperUpperLower&&s(e)&&s(p)&&i(o),n||a||u||d||m},a=e=>(e=>e.replace(/‘’`/g,\"'\").replace(/“”/g,'\"'))(e).replace(/[…,:;[\\](){}\\-‐–—'\".!?]/g,\"\"),u=function(e,i){if(!e)return;const s=Object.assign({},p,i);this.orgin={input:e},e=e.trim().replace(/\\s+/g,\" \"),s.delimitInput?this.orgin.normalised=l(e,s.delimitInput):this.orgin.normalised=e,this.orgin.isPureAlphaNumeric=(e=>e&&e.split&&!e.split(\"\").some(e=>!r(e)&&!t(e)))(this.orgin.normalised);let u,d=this.orgin.normalised;u=s.delimitInput?s.delimitInput:(this.orgin.isPureAlphaNumeric,s.delimitOutput);const m=Object.entries(s.replace);if(s.replace&&m.length)for(let[e,t]of m)d=d.replace(new RegExp(e,\"g\"),t);const h=[].concat(s.preserve,s.delimit);if(h.length&&(h.forEach(e=>{d=d.replace(new RegExp(e,\"g\"),u+e+u)}),d=l(d,u)),s.delimitInput)this.phrase=d,this.words=d.split(s.delimitInput);else if(this.orgin.isPureAlphaNumeric){let e=d.split(s.delimitOutput);this.phrase=e.map(e=>s.preserve.includes(e)?e:((e,t)=>{let r=e[0];for(let i=1;i<e.length;i++)n(e[i-1],e[i],e[i+1]||\"\",t)&&(r+=t.delimitOutput),r+=e[i];return r})(e,s)).join(s.delimitOutput),this.words=this.phrase.split(s.delimitOutput)}else this.phrase=d,this.words=d.split(s.delimitOutput);const c=e=>e.toLowerCase(),g=e=>e.toUpperCase(),C=e=>{let t=this.words.map((t,r)=>0===r?s.preserve.includes(t)?t:e.firstWordFirstChar(t.substr(0,1))+e.firstWordNextChars(t.substr(1)):s.preserve.includes(t)?t:e.nextWordsFirstChar(t.substr(0,1))+e.nextWordsNextChars(t.substr(1)));return e.postProcess(t.join(e.delimitOutput))};this.camelCase=()=>{const e=Object.assign({},o,{postProcess:a,delimitOutput:\"\",firstWordFirstChar:c,firstWordNextChars:c,nextWordsFirstChar:g,nextWordsNextChars:c});return C(e)},this.humanTitle=()=>{const e=Object.assign({},o,{delimitOutput:\" \",firstWordFirstChar:g,nextWordsFirstChar:g});return C(e)}};export default function(e,t){return t||(t={}),new u(e,t)}\n//# sourceMappingURL=transformCase.js.map\n","import { isAttachedToDom, isPrimitive, hasOwnProperty } from './functions'\nimport transformCase from 'transform-case'\n\nconst DisplayTable = function(eventRoot) {\n    this.name = 'DisplayTable'\n    const root = document.body\n    const table = document.createElement('table')\n    this.element = table\n    table.className = 'picturae-targetmap-display'\n\n    const readableValue = value => {\n        if (value === null) {\n            return '--'\n        }\n        if (typeof value === 'boolean') {\n            let bool = `<targetBoolean class=\"${\n                value ? 'valid' : 'invalid'\n            }\"></targetBoolean>`\n            return bool\n        }\n        if (isPrimitive(value)) return value\n        if (value instanceof Array && value.length) {\n            if (isPrimitive(value[0])) return value.join(', ')\n            if (typeof value[0] === 'object') {\n                let fragment = ''\n                for (let i = 0; i < value.length; i++) {\n                    fragment += readableValue(value[i])\n                }\n                return fragment\n            }\n        }\n        if (typeof value === 'object' && !(value instanceof Array)) {\n            let fragment = ''\n            for (let [property, content] of Object.entries(value)) {\n                let line = ''\n                if (typeof content === 'boolean') {\n                    line = `${readableValue(content)} ${transformCase(\n                        property,\n                    ).humanTitle()}<br/>`\n                } else {\n                    line = `${transformCase(\n                        property,\n                    ).humanTitle()}: ${readableValue(content)}<br/>`\n                }\n                if (line) fragment += line\n            }\n            return fragment + ''\n        }\n    }\n\n    const dataBody = (groupName, groupData) => {\n        let body = `<tbody name=\"${groupName}\">`\n        for (let [key, value] of Object.entries(groupData)) {\n            let row = ''\n            row = `<tr><th>${transformCase(key, {\n                replace: {\n                    deltaE: '&Delta;E',\n                    DeltaE: '&Delta;E',\n                    deltaL: '&Delta;L',\n                    DeltaL: '&Delta;L',\n                },\n            }).humanTitle()}</th><td>${readableValue(value)}</td></tr>`\n            if (row) body += row\n        }\n        body += '</tbody>'\n        return body\n    }\n\n    const targetEnter = function(event) {\n        const targetData = event.target.dataset.picturaeTargetmapDisplay\n        if (targetData) {\n            table.innerHTML = ''\n            const userData = JSON.parse(targetData)\n            let colorSquare = ''\n            if (userData.patchType && userData.patchType === 'color') {\n                let color = `rgb(${userData.observed.RGB.join()})`\n                colorSquare = `<targetColor style=\"background: ${color};\"></targetColor>`\n            }\n            table.innerHTML += `<caption>\n                ${userData.name} ${colorSquare}\n            </caption>`\n\n            if (userData.assessed) {\n                table.innerHTML += dataBody('assessed', userData.assessed)\n            }\n            if (userData.observed) {\n                table.innerHTML += dataBody('observed', userData.observed)\n            }\n            if (userData.reference) {\n                table.innerHTML += dataBody('reference', userData.reference)\n            }\n            if (userData.validity) {\n                if (hasOwnProperty(userData.validity, 'valid')) {\n                    const isValid = userData.validity.valid\n                    table.classList.remove('valid', 'invalid')\n                    table.classList.add(isValid ? 'valid' : 'invalid')\n                }\n                table.innerHTML += dataBody('validity', userData.validity)\n            }\n\n            if (!isAttachedToDom(table)) root.appendChild(table)\n        }\n    }\n\n    const targetLeave = function() {\n        if (isAttachedToDom(table)) root.removeChild(table)\n    }\n\n    eventRoot.addEventListener('mouseover', function(event) {\n        const enter = event.target\n        if (\n            enter.tagName === 'TARGETMAP' ||\n            enter.tagName === 'TARGETCHART' ||\n            enter.tagName === 'TARGETPATCH'\n        ) {\n            targetEnter(event)\n        } else if (!table.contains(enter)) {\n            targetLeave(event)\n        }\n        event.stopPropagation()\n    })\n\n    eventRoot.addEventListener('mousemove', function(event) {\n        const offPointer = 16\n\n        if (event.clientX / root.clientWidth < 0.5) {\n            table.style.left = `${event.clientX + offPointer}px`\n            table.style.right = 'auto'\n        } else {\n            table.style.left = 'auto'\n            table.style.right = `${root.clientWidth -\n                event.clientX +\n                offPointer}px`\n        }\n\n        const ySpace = (root.clientHeight - table.clientHeight) / 2\n\n        if (event.clientY < ySpace - offPointer) {\n            table.style.top = `${event.clientY + offPointer}px`\n            table.style.bottom = 'auto'\n        } else if (event.clientY < ySpace + offPointer + table.clientHeight) {\n            table.style.top = `${ySpace}px`\n            table.style.bottom = 'auto'\n        } else {\n            table.style.top = 'auto'\n            table.style.bottom = `${root.clientHeight -\n                event.clientY +\n                offPointer}px`\n        }\n        event.stopPropagation()\n    })\n}\n\nexport { DisplayTable }\n","import { isUsableNumber, hasOwnProperty, roundAt } from './functions'\nimport { TargetChart } from './targetChart'\nimport { DisplayTable } from './displayTable'\n\nconst TargetMap = function(viewer) {\n    this.name = 'TargetMap'\n    this.element = document.createElement('targetmap')\n\n    viewer.canvas.appendChild(this.element)\n\n    this.resize = () => {\n        this.tiledImage = viewer.world.getItemAt(0)\n        if (!this.tiledImage) return\n        const imageBounds = this.tiledImage.getBounds()\n\n        const leftTop = viewer.viewport.pixelFromPoint(imageBounds.getTopLeft())\n        const rightBottom = viewer.viewport.pixelFromPoint(\n            imageBounds.getBottomRight(),\n        )\n\n        if (!isUsableNumber(leftTop.x, leftTop.y, rightBottom.x, rightBottom.y))\n            return\n\n        const precision = 4\n        const box = {\n            left: roundAt(leftTop.x, precision),\n            top: roundAt(leftTop.y, precision),\n            width: roundAt(rightBottom.x - leftTop.x, precision),\n            height: roundAt(rightBottom.y - leftTop.y, precision),\n        }\n\n        this.element.style.left = `${box.left}px`\n        this.element.style.top = `${box.top}px`\n        this.element.style.width = `${box.width}px`\n        this.element.style.height = `${box.height}px`\n    }\n\n    viewer.addHandler('animation', () => {\n        this.resize()\n    })\n    viewer.addHandler('open', () => {\n        this.resize()\n    })\n    viewer.addHandler('rotate', () => {\n        this.resize()\n    })\n    viewer.addHandler('resize', () => {\n        this.resize()\n    })\n\n    this.resize()\n\n    this.charts = []\n    this.render = json => {\n        this.element.innerHTML = ''\n        if (!json.name) json.name = 'Target Scan'\n\n        let userData = {}\n        for (let [key, value] of Object.entries(json)) {\n            if (!(key === 'targets')) {\n                userData[key] = value\n            }\n        }\n        this.element.dataset.picturaeTargetmapDisplay = JSON.stringify(userData)\n\n        if (userData.validity && hasOwnProperty(userData.validity, 'valid')) {\n            const isValid = userData.validity.valid\n            this.element.classList.add(isValid ? 'valid' : 'invalid')\n        }\n\n        json.targets.forEach(chartData => {\n            this.charts.push(\n                new TargetChart(\n                    chartData,\n                    this.element,\n                    this.tiledImage.getContentSize(),\n                ),\n            )\n        })\n    }\n    new DisplayTable(document.body)\n}\n\nexport { TargetMap }\n","import { TargetMap } from './targetMap'\nimport './main.scss'\n\nvar index = (function() {\n    var $ = window.OpenSeadragon\n\n    if (!$) {\n        $ = require('openseadragon')\n        if (!$) {\n            throw new Error('OpenSeadragon is missing.')\n        }\n    }\n\n    $.Viewer.prototype.targetMap = function() {\n        if (!this._targetMap) {\n            this._targetMap = new TargetMap(this)\n        }\n\n        return this._targetMap\n    }\n})()\n\nexport default index\n"],"names":["roundAt","number","decimals","Number","Math","round","isPrimitive","value","isAttachedToDom","elm","getRootNode","Document","ShadowRoot","hasOwnProperty","object","prop","Object","prototype","call","TargetPatch","patchData","parentNode","containerSize","this","name","element","document","createElement","style","left","location","x","top","y","width","w","height","h","appendChild","userData","key","entries","dataset","picturaeTargetmapDisplay","JSON","stringify","validity","isValid","valid","classList","add","TargetChart","chartData","r","transformOrigin","rotate","transform","patches","contentSize","colorPatches","forEach","patchType","push","e","Boolean","length","t","match","toLowerCase","toUpperCase","i","s","p","delimit","preserve","replace","delimitInput","delimitLetterNumber","delimitLowerUpper","delimitNumberLetter","delimitUpperLower","delimitUpperUpperLower","delimitOutput","o","postProcess","firstWordFirstChar","firstWordNextChars","nextWordsFirstChar","nextWordsNextChars","l","RegExp","n","a","u","d","m","assign","orgin","input","trim","normalised","isPureAlphaNumeric","split","some","concat","phrase","words","map","includes","join","c","g","C","substr","camelCase","humanTitle","DisplayTable","eventRoot","root","body","table","className","readableValue","Array","fragment","property","content","line","transformCase","dataBody","groupName","groupData","row","deltaE","DeltaE","deltaL","DeltaL","addEventListener","event","enter","target","tagName","targetData","innerHTML","parse","colorSquare","observed","RGB","assessed","reference","remove","targetEnter","contains","removeChild","stopPropagation","clientX","clientWidth","right","ySpace","clientHeight","clientY","bottom","TargetMap","viewer","canvas","resize","tiledImage","world","getItemAt","imageBounds","getBounds","leftTop","viewport","pixelFromPoint","getTopLeft","rightBottom","getBottomRight","isUsable","arguments","from","isFinite","isUsableNumber","box","addHandler","charts","render","json","targets","getContentSize","$","window","OpenSeadragon","require","Error","Viewer","targetMap","_targetMap"],"mappings":"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"}