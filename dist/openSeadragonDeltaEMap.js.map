{"version":3,"file":"openSeadragonDeltaEMap.js","sources":["../src/functions.js","../src/patch.js","../src/chart.js","../node_modules/transform-case/module/transformCase.js","../src/displayTable.js","../src/overlay.js","../src/index.js"],"sourcesContent":["/**\n * Test for values with which calculations can be done\n * @private\n * @param {arguments} anonymus - one or more values to test\n * @returns {boolean} is a useable number\n */\nconst isUsableNumber = function() {\n    let isUsable = Boolean(arguments.length)\n    Array.from(arguments).forEach(value => {\n        isUsable =\n            isUsable && typeof value === 'number' && Number.isFinite(value)\n    })\n    return isUsable\n}\n\n/**\n * Round at decimals\n * @private\n * @param {number} number - any number to round\n * @param {number} decimals - number of decimals to round at\n * @returns {number} the rounded number\n */\nconst roundAt = function(number, decimals) {\n    if (number < 1 + 'e-' + decimals && number > -1 + 'e-' + decimals) {\n        return 0\n    }\n    // https://www.jacklmoore.com/notes/rounding-in-javascript/\n    return Number(Math.round(number + 'e' + decimals) + 'e-' + decimals)\n}\n\n/**\n * Check for primitives\n * @private\n * @param {any} value - any value to check\n * @returns {boolean} is a primitive\n */\nconst isPrimitive = function(value) {\n    return (\n        typeof value === 'string' ||\n        typeof value === 'number' ||\n        typeof value === 'boolean'\n    )\n}\n\n/**\n * Check for the node being inside the DOM\n * @private\n * @param {Node} node\n * @returns {Boolean} true when the node is onscreen -- not removed\n */\nconst isAttachedToDom = function(elm) {\n    return (\n        elm &&\n        (elm.getRootNode() instanceof Document ||\n            elm.getRootNode() instanceof ShadowRoot)\n    )\n}\n\n/**\n * Check for existence of property in object\n * @private\n * @param {Object} object\n * @param {String} prop\n * @returns {Boolean} hasIt - object has that own property\n */\nconst hasOwnProperty = function(object, prop) {\n    const hasIt = Object.prototype.hasOwnProperty.call(object, prop)\n    return hasIt\n}\n\nexport { isUsableNumber, roundAt, isPrimitive, isAttachedToDom, hasOwnProperty }\n","import { hasOwnProperty } from './functions'\n\nconst Patch = function(patchData, parentNode, containerSize) {\n    this.name = 'Patch'\n    this.element = document.createElement('deltaepatch')\n\n    this.element.style.left = `${(patchData.location.x * 100) /\n        containerSize.x}%`\n    this.element.style.top = `${(patchData.location.y * 100) /\n        containerSize.y}%`\n    this.element.style.width = `${(patchData.location.w * 100) /\n        containerSize.x}%`\n    this.element.style.height = `${(patchData.location.h * 100) /\n        containerSize.y}%`\n    parentNode.appendChild(this.element)\n\n    let userData = {}\n    for (let [key, value] of Object.entries(patchData)) {\n        if (!(key === 'location')) {\n            userData[key] = value\n        }\n    }\n    this.element.dataset.picturaeDeltaemapDisplay = JSON.stringify(userData)\n\n    if (userData.validity && hasOwnProperty(userData.validity, 'valid')) {\n        const isValid = userData.validity.valid\n        this.element.classList.add(isValid ? 'valid' : 'invalid')\n    }\n}\n\nexport { Patch }\n","import { hasOwnProperty } from './functions'\nimport { Patch } from '../src/patch'\n\nconst Chart = function(chartData, parentNode, containerSize) {\n    this.name = 'Chart'\n    this.element = document.createElement('deltaechart')\n\n    this.element.style.left = `${(chartData.location.x * 100) /\n        containerSize.x}%`\n    this.element.style.top = `${(chartData.location.y * 100) /\n        containerSize.y}%`\n    this.element.style.width = `${(chartData.location.w * 100) /\n        containerSize.x}%`\n    this.element.style.height = `${(chartData.location.h * 100) /\n        containerSize.y}%`\n    if (chartData.location.r) {\n        if (chartData.location.r === 180) {\n            this.element.style.transformOrigin = 'center center'\n            const rotate = `rotate(${chartData.location.r}deg)`\n            this.element.style.transform = rotate //+ ' ' + translate\n        }\n    }\n    parentNode.appendChild(this.element)\n\n    let userData = {}\n    for (let [key, value] of Object.entries(chartData)) {\n        if (\n            !(\n                key === 'location' ||\n                key === 'colorPatches' ||\n                key === 'edgePatches'\n            )\n        ) {\n            userData[key] = value\n        }\n    }\n    this.element.dataset.picturaeDeltaemapDisplay = JSON.stringify(userData)\n\n    if (userData.validity && hasOwnProperty(userData.validity, 'valid')) {\n        const isValid = userData.validity.valid\n        this.element.classList.add(isValid ? 'valid' : 'invalid')\n    }\n\n    this.patches = []\n    const contentSize = {\n        x: chartData.location.w,\n        y: chartData.location.h,\n    }\n    if (chartData.colorPatches) {\n        chartData.colorPatches.forEach(patchData => {\n            patchData.patchType = 'color'\n            this.patches.push(new Patch(patchData, this.element, contentSize))\n        })\n    }\n    // if (chartData.edgePatches) {\n    //     chartData.edgePatches.forEach(patchData => {\n    //         patchData.patchType = 'edge'\n    //         this.patches.push(\n    //             new Patch(patchData, this.element, contentSize),\n    //         )\n    //     })\n    // }\n}\n\nexport { Chart }\n","const e=e=>Boolean(e&&\"string\"==typeof e&&1===e.length),t=t=>e(t)&&Boolean(t.match(/[0-9]/)),r=t=>e(t)&&t.toLowerCase()!==t.toUpperCase(),i=t=>e(t)&&t===t.toLowerCase()&&t!==t.toUpperCase(),s=t=>e(t)&&t===t.toUpperCase()&&t!==t.toLowerCase(),p={delimit:[],preserve:[],replace:{},delimitInput:\"\",delimitLetterNumber:!0,delimitLowerUpper:!0,delimitNumberLetter:!0,delimitUpperLower:!1,delimitUpperUpperLower:!0,delimitOutput:\" \"},o={postProcess:e=>e,firstWordFirstChar:e=>e,firstWordNextChars:e=>e,nextWordsFirstChar:e=>e,nextWordsNextChars:e=>e},l=(e,t)=>{const r=new RegExp(\"^\"+t),i=new RegExp(t+\"$\"),s=new RegExp(t+t,\"g\");return e.replace(r,\"\").replace(i,\"\").replace(s,t)},n=(e,p,o,l)=>{let n,a,u,d,m;return n=l.delimitLetterNumber&&r(e)&&t(p),a=l.delimitLowerUpper&&i(e)&&s(p),u=l.delimitNumberLetter&&t(e)&&r(p),d=l.delimitUpperLower&&s(e)&&i(p),m=l.delimitUpperUpperLower&&s(e)&&s(p)&&i(o),n||a||u||d||m},a=e=>(e=>e.replace(/‘’`/g,\"'\").replace(/“”/g,'\"'))(e).replace(/[…,:;[\\](){}\\-‐–—'\".!?]/g,\"\"),u=function(e,i){if(!e)return;const s=Object.assign({},p,i);this.orgin={input:e},e=e.trim().replace(/\\s+/g,\" \"),s.delimitInput?this.orgin.normalised=l(e,s.delimitInput):this.orgin.normalised=e,this.orgin.isPureAlphaNumeric=(e=>e&&e.split&&!e.split(\"\").some(e=>!r(e)&&!t(e)))(this.orgin.normalised);let u,d=this.orgin.normalised;u=s.delimitInput?s.delimitInput:(this.orgin.isPureAlphaNumeric,s.delimitOutput);const m=Object.entries(s.replace);if(s.replace&&m.length)for(let[e,t]of m)d=d.replace(new RegExp(e,\"g\"),t);const h=[].concat(s.preserve,s.delimit);if(h.length&&(h.forEach(e=>{d=d.replace(new RegExp(e,\"g\"),u+e+u)}),d=l(d,u)),s.delimitInput)this.phrase=d,this.words=d.split(s.delimitInput);else if(this.orgin.isPureAlphaNumeric){let e=d.split(s.delimitOutput);this.phrase=e.map(e=>s.preserve.includes(e)?e:((e,t)=>{let r=e[0];for(let i=1;i<e.length;i++)n(e[i-1],e[i],e[i+1]||\"\",t)&&(r+=t.delimitOutput),r+=e[i];return r})(e,s)).join(s.delimitOutput),this.words=this.phrase.split(s.delimitOutput)}else this.phrase=d,this.words=d.split(s.delimitOutput);const c=e=>e.toLowerCase(),g=e=>e.toUpperCase(),C=e=>{let t=this.words.map((t,r)=>0===r?s.preserve.includes(t)?t:e.firstWordFirstChar(t.substr(0,1))+e.firstWordNextChars(t.substr(1)):s.preserve.includes(t)?t:e.nextWordsFirstChar(t.substr(0,1))+e.nextWordsNextChars(t.substr(1)));return e.postProcess(t.join(e.delimitOutput))};this.camelCase=()=>{const e=Object.assign({},o,{postProcess:a,delimitOutput:\"\",firstWordFirstChar:c,firstWordNextChars:c,nextWordsFirstChar:g,nextWordsNextChars:c});return C(e)},this.humanTitle=()=>{const e=Object.assign({},o,{delimitOutput:\" \",firstWordFirstChar:g,nextWordsFirstChar:g});return C(e)}};export default function(e,t){return t||(t={}),new u(e,t)}\n//# sourceMappingURL=transformCase.js.map\n","import { isAttachedToDom, isPrimitive, hasOwnProperty } from './functions'\nimport transformCase from 'transform-case'\n\nconst DisplayTable = function(mainElement) {\n    this.name = 'DisplayTable'\n    const eventRoot = document.body\n    const docRoot = document.documentElement\n    const displayRoot = mainElement.parentNode\n    const table = document.createElement('table')\n    this.element = table\n    table.className = 'picturae-deltaemap-display'\n\n    const readableValue = value => {\n        if (value === null) {\n            return '--'\n        }\n        if (typeof value === 'boolean') {\n            let bool = `<deltaeboolean class=\"${\n                value ? 'valid' : 'invalid'\n            }\"></deltaeboolean>`\n            return bool\n        }\n        if (isPrimitive(value)) return value\n        if (value instanceof Array && value.length) {\n            if (isPrimitive(value[0])) return value.join(', ')\n            if (typeof value[0] === 'object') {\n                let fragment = ''\n                for (let i = 0; i < value.length; i++) {\n                    fragment += readableValue(value[i])\n                }\n                return fragment\n            }\n        }\n        if (typeof value === 'object' && !(value instanceof Array)) {\n            let fragment = ''\n            for (let [property, content] of Object.entries(value)) {\n                let line = ''\n                if (typeof content === 'boolean') {\n                    line = `${readableValue(content)} ${transformCase(\n                        property,\n                    ).humanTitle()}<br/>`\n                } else {\n                    line = `${transformCase(\n                        property,\n                    ).humanTitle()}: ${readableValue(content)}<br/>`\n                }\n                if (line) fragment += line\n            }\n            return fragment + ''\n        }\n    }\n\n    const dataBody = (groupName, groupData) => {\n        let body = `<tbody name=\"${groupName}\">`\n        for (let [key, value] of Object.entries(groupData)) {\n            let row = ''\n            row = `<tr><th>${transformCase(key, {\n                replace: {\n                    deltaE: ' &Delta;E ',\n                    DeltaE: ' &Delta;E ',\n                    deltaL: ' &Delta;L ',\n                    DeltaL: ' &Delta;L ',\n                },\n            }).humanTitle()}</th><td>${readableValue(value)}</td></tr>`\n            if (row) body += row\n        }\n        body += '</tbody>'\n        return body\n    }\n\n    const targetEnter = function(event) {\n        const targetData = event.target.dataset.picturaeDeltaemapDisplay\n        if (targetData) {\n            table.innerHTML = ''\n            const userData = JSON.parse(targetData)\n            let colorSquare = ''\n            if (userData.patchType && userData.patchType === 'color') {\n                let color = `rgb(${userData.observed.RGB.join()})`\n                colorSquare = `<deltaecolor style=\"background: ${color};\"></deltaecolor>`\n            }\n            table.innerHTML += `<caption>\n                ${userData.name} ${colorSquare}\n            </caption>`\n\n            if (userData.assessed) {\n                table.innerHTML += dataBody('assessed', userData.assessed)\n            }\n            if (userData.observed) {\n                table.innerHTML += dataBody('observed', userData.observed)\n            }\n            if (userData.reference) {\n                table.innerHTML += dataBody('reference', userData.reference)\n            }\n            if (userData.validity) {\n                if (hasOwnProperty(userData.validity, 'valid')) {\n                    const isValid = userData.validity.valid\n                    table.classList.remove('valid', 'invalid')\n                    table.classList.add(isValid ? 'valid' : 'invalid')\n                }\n                table.innerHTML += dataBody('validity', userData.validity)\n            }\n\n            if (!isAttachedToDom(table)) displayRoot.appendChild(table)\n        }\n    }\n\n    const targetLeave = function() {\n        if (isAttachedToDom(table)) displayRoot.removeChild(table)\n    }\n\n    eventRoot.addEventListener('mouseover', function(event) {\n        const enter = event.target\n        if (\n            enter.tagName === 'DELTAEOVERLAY' ||\n            enter.tagName === 'DELTAECHART' ||\n            enter.tagName === 'DELTAEPATCH'\n        ) {\n            targetEnter(event)\n        } else if (!table.contains(enter)) {\n            targetLeave(event)\n        }\n        event.stopPropagation()\n    })\n\n    eventRoot.addEventListener('mousemove', function(event) {\n        const offPointer = 16\n\n        if (event.clientX / docRoot.clientWidth < 0.5) {\n            table.style.left = `${event.clientX + offPointer}px`\n            table.style.right = 'auto'\n        } else {\n            table.style.left = 'auto'\n            table.style.right = `${docRoot.clientWidth -\n                event.clientX +\n                offPointer}px`\n        }\n\n        const ySpace = (docRoot.clientHeight - table.clientHeight) / 2\n\n        if (event.clientY < ySpace - offPointer) {\n            table.style.top = `${event.clientY + offPointer}px`\n            table.style.bottom = 'auto'\n        } else if (event.clientY < ySpace + offPointer + table.clientHeight) {\n            table.style.top = `${ySpace}px`\n            table.style.bottom = 'auto'\n        } else {\n            table.style.top = 'auto'\n            table.style.bottom = `${docRoot.clientHeight -\n                event.clientY +\n                offPointer}px`\n        }\n        event.stopPropagation()\n    })\n}\n\nexport { DisplayTable }\n","import { isUsableNumber, hasOwnProperty, roundAt } from './functions'\nimport { Chart } from './chart'\nimport { DisplayTable } from './displayTable'\n\nconst Overlay = function(viewer) {\n    this.name = 'Overlay'\n    this.element = document.createElement('deltaeoverlay')\n\n    viewer.canvas.appendChild(this.element)\n\n    this.resize = () => {\n        this.tiledImage = viewer.world.getItemAt(0)\n        if (!this.tiledImage) return\n        const imageBounds = this.tiledImage.getBounds()\n\n        const leftTop = viewer.viewport.pixelFromPoint(imageBounds.getTopLeft())\n        const rightBottom = viewer.viewport.pixelFromPoint(\n            imageBounds.getBottomRight(),\n        )\n\n        if (!isUsableNumber(leftTop.x, leftTop.y, rightBottom.x, rightBottom.y))\n            return\n\n        const precision = 4\n        const box = {\n            left: roundAt(leftTop.x, precision),\n            top: roundAt(leftTop.y, precision),\n            width: roundAt(rightBottom.x - leftTop.x, precision),\n            height: roundAt(rightBottom.y - leftTop.y, precision),\n        }\n\n        this.element.style.left = `${box.left}px`\n        this.element.style.top = `${box.top}px`\n        this.element.style.width = `${box.width}px`\n        this.element.style.height = `${box.height}px`\n    }\n\n    viewer.addHandler('animation', () => {\n        this.resize()\n    })\n    viewer.addHandler('open', () => {\n        this.resize()\n    })\n    viewer.addHandler('rotate', () => {\n        this.resize()\n    })\n    viewer.addHandler('resize', () => {\n        this.resize()\n    })\n\n    this.resize()\n\n    this.charts = []\n    this.render = jsonData => {\n        this.element.innerHTML = ''\n        if (\n            !jsonData ||\n            !jsonData.validity ||\n            !jsonData.targets ||\n            !jsonData.assessed\n        ) {\n            console.error('Bad DeltaE JSON')\n            return\n        }\n\n        if (!jsonData.name) jsonData.name = 'Target Scan'\n        let userData = {}\n        for (let [key, value] of Object.entries(jsonData)) {\n            if (!(key === 'targets')) {\n                userData[key] = value\n            }\n        }\n        this.element.dataset.picturaeDeltaemapDisplay = JSON.stringify(userData)\n\n        if (userData.validity && hasOwnProperty(userData.validity, 'valid')) {\n            const isValid = userData.validity.valid\n            this.element.classList.add(isValid ? 'valid' : 'invalid')\n        }\n\n        jsonData.targets.forEach(chartData => {\n            this.charts.push(\n                new Chart(\n                    chartData,\n                    this.element,\n                    this.tiledImage.getContentSize(),\n                ),\n            )\n        })\n    }\n    new DisplayTable(this.element)\n}\n\nexport { Overlay }\n","import { Overlay } from './overlay'\nimport './main.scss'\n\nvar index = (function() {\n    var $ = window.OpenSeadragon\n\n    if (!$) {\n        $ = require('openseadragon')\n        if (!$) {\n            throw new Error('OpenSeadragon is missing.')\n        }\n    }\n\n    $.Viewer.prototype.deltaEMap = function(viewer) {\n        if (!this._deltaEMap) {\n            this._deltaEMap = new Overlay(viewer)\n        }\n\n        return this._deltaEMap\n    }\n})()\n\nexport default index\n"],"names":["roundAt","number","decimals","Number","Math","round","isPrimitive","value","isAttachedToDom","elm","getRootNode","Document","ShadowRoot","hasOwnProperty","object","prop","Object","prototype","call","Patch","patchData","parentNode","containerSize","this","name","element","document","createElement","style","left","location","x","top","y","width","w","height","h","appendChild","userData","key","entries","dataset","picturaeDeltaemapDisplay","JSON","stringify","validity","isValid","valid","classList","add","Chart","chartData","r","transformOrigin","rotate","transform","patches","contentSize","colorPatches","forEach","patchType","push","e","Boolean","length","t","match","toLowerCase","toUpperCase","i","s","p","delimit","preserve","replace","delimitInput","delimitLetterNumber","delimitLowerUpper","delimitNumberLetter","delimitUpperLower","delimitUpperUpperLower","delimitOutput","o","postProcess","firstWordFirstChar","firstWordNextChars","nextWordsFirstChar","nextWordsNextChars","l","RegExp","n","a","u","d","m","assign","orgin","input","trim","normalised","isPureAlphaNumeric","split","some","concat","phrase","words","map","includes","join","c","g","C","substr","camelCase","humanTitle","DisplayTable","mainElement","eventRoot","body","docRoot","documentElement","displayRoot","table","className","readableValue","Array","fragment","property","content","line","transformCase","dataBody","groupName","groupData","row","deltaE","DeltaE","deltaL","DeltaL","addEventListener","event","enter","target","tagName","targetData","innerHTML","parse","colorSquare","observed","RGB","assessed","reference","remove","targetEnter","contains","removeChild","stopPropagation","clientX","clientWidth","right","ySpace","clientHeight","clientY","bottom","Overlay","viewer","canvas","resize","tiledImage","world","getItemAt","imageBounds","getBounds","leftTop","viewport","pixelFromPoint","getTopLeft","rightBottom","getBottomRight","isUsable","arguments","from","isFinite","isUsableNumber","box","addHandler","charts","render","jsonData","targets","console","error","getContentSize","$","window","OpenSeadragon","require","Error","Viewer","deltaEMap","_deltaEMap"],"mappings":"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"}